<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: JSS::Script
  
    &mdash; The JSS Ruby Gem - access to the CasperSuite API
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!JSS/Script.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../JSS.html" title="JSS (module)">JSS</a></span></span>
     &raquo; 
    <span class="title">Script</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: JSS::Script
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></li>
          
            <li class="next">JSS::Script</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Creatable.html" title="JSS::Creatable (module)">Creatable</a></span>, <span class='object_link'><a href="Updatable.html" title="JSS::Updatable (module)">Updatable</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/jss/api_object/script.rb<span class="defines">,<br />
  lib/jss.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Script in the JSS.</p>

<p>As of Casper 9.4, the script contents as stored in the database are
accessible via the API</p>

<p>This class will save the script contents back to the database with the
<span class='object_link'><a href="Creatable.html#create-instance_method" title="JSS::Creatable#create (method)">Creatable#create</a></span> or <span class='object_link'><a href="Updatable.html#update-instance_method" title="JSS::Updatable#update (method)">Updatable#update</a></span> methods</p>

<p>If your scripts are stored on the master distribution point instead of the
database, you can use <span class='object_link'><a href="#upload_master_file-instance_method" title="JSS::Script#upload_master_file (method)">#upload_master_file</a></span> to save it to the server, and
<span class='object_link'><a href="#delete_master_file-instance_method" title="JSS::Script#delete_master_file (method)">#delete_master_file</a></span> to delete it from the server.</p>

<p>Use the <span class='object_link'><a href="#run-instance_method" title="JSS::Script#run (method)">#run</a></span> method to run the script on the local machine via the
‘jamf runScript’ command</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></li>
    
  </ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RSRC_BASE-constant" class="">RSRC_BASE =
          <div class="docstring">
  <div class="discussion">
    
<p>The base for REST resources of this class</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='string val'>&quot;scripts&quot;</span>
</pre></dd>
      
        <dt id="RSRC_LIST_KEY-constant" class="">RSRC_LIST_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>the hash key used for the JSON list output of all objects in the JSS</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol val'>:scripts</span>
</pre></dd>
      
        <dt id="RSRC_OBJECT_KEY-constant" class="">RSRC_OBJECT_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>The hash key used for the JSON object output. It’s also used in various
error messages</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol val'>:script</span>
</pre></dd>
      
        <dt id="VALID_DATA_KEYS-constant" class="">VALID_DATA_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>these keys, as well as :id and :name,  are present in valid API JSON data
for this class</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='symbol val'>:parameters</span><span class='comma token'>,</span> <span class='symbol val'>:filename</span><span class='comma token'>,</span> <span class='symbol val'>:os_requirements</span> <span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="DIST_POINT_SCRIPTS_FOLDER-constant" class="">DIST_POINT_SCRIPTS_FOLDER =
          <div class="docstring">
  <div class="discussion">
    
<p>The script storage folder on the distribution point, if used</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='string val'>&quot;Scripts&quot;</span>
</pre></dd>
      
        <dt id="PRIORITIES-constant" class="">PRIORITIES =
          <div class="docstring">
  <div class="discussion">
    
<p>Priority to use for running the script in relation to other actions during
imaging</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span> <span class='string val'>'Before'</span><span class='comma token'>,</span> <span class='string val'>'After'</span><span class='comma token'>,</span><span class='string val'>'At Reboot'</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="DEFAULT_PRIORITY-constant" class="">DEFAULT_PRIORITY =
          <div class="docstring">
  <div class="discussion">
    
<p>which is default?</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='string val'>&quot;After&quot;</span>
</pre></dd>
      
        <dt id="PARAMETER_KEYS-constant" class="">PARAMETER_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>The keys used in the @parameters Hash</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='symbol val'>:parameter4</span><span class='comma token'>,</span> <span class='symbol val'>:parameter5</span><span class='comma token'>,</span> <span class='symbol val'>:parameter6</span><span class='comma token'>,</span><span class='symbol val'>:parameter7</span><span class='comma token'>,</span> <span class='symbol val'>:parameter8</span><span class='comma token'>,</span> <span class='symbol val'>:parameter9</span><span class='comma token'>,</span> <span class='symbol val'>:parameter10</span><span class='comma token'>,</span> <span class='symbol val'>:parameter11</span><span class='rbrack token'>]</span>
</pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#category-instance_method" title="#category (instance method)">- (String) <strong>category</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The category of this script, stored in the JSS as the id number from the
categories table.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#filename-instance_method" title="#filename (instance method)">- (String) <strong>filename</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The file name of the script, if stored in a dist.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Integer) <strong>id</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#id-instance_method" title="JSS::APIObject#id (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The JSS id number.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#in_jss-instance_method" title="#in_jss (instance method)">- (Boolean) <strong>in_jss</strong> </a>
    

    
      (also: #in_jss?)
    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#in_jss-instance_method" title="JSS::APIObject#in_jss (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is it in the JSS?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#info-instance_method" title="#info (instance method)">- (String) <strong>info</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The info field for this script.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (String) <strong>name</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#name-instance_method" title="JSS::APIObject#name (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#need_to_update-instance_method" title="#need_to_update (instance method)">- (Boolean) <strong>need_to_update</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Updatable.html#need_to_update-instance_method" title="JSS::Updatable#need_to_update (method)">Updatable</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Do we have unsaved changes?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#notes-instance_method" title="#notes (instance method)">- (String) <strong>notes</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The notes field for this script.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#os_requirements-instance_method" title="#os_requirements (instance method)">- (Array&lt;String&gt;) <strong>os_requirements</strong> </a>
    

    
      (also: #oses)
    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The OS versions this can be installed onto.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parameters-instance_method" title="#parameters (instance method)">- (Hash) <strong>parameters</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Script parameters 4-11.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#priority-instance_method" title="#priority (instance method)">- (String) <strong>priority</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Either ‘Before’ or ‘After’ or “At Reboot”.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest_rsrc-instance_method" title="#rest_rsrc (instance method)">- (String) <strong>rest_rsrc</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#rest_rsrc-instance_method" title="JSS::APIObject#rest_rsrc (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Rest resource for API access (the part after “JSSResource/” ).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#script_contents-instance_method" title="#script_contents (instance method)">- (String) <strong>script_contents</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The actual code for this script, if it’s stored in the database.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (Integer) <strong>create</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Creatable.html#create-instance_method" title="JSS::Creatable#create (method)">Creatable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new object in the JSS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_master_file-instance_method" title="#delete_master_file (instance method)">- (Boolean) <strong>delete_master_file</strong>(rw_pw, unmount = true) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Delete the filename from the master distribution point, if it exists.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Script) <strong>initialize</strong>(args = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of Script.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name%3D-instance_method" title="#name= (instance method)">- (void) <strong>name=</strong>(new_val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Change the script’s display name.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest_xml-instance_method" title="#rest_xml (instance method)">- (Object) <strong>rest_xml</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return the xml for creating or updating this script in the JSS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Array&lt;(Integer,String)&gt;) <strong>run</strong>(opts = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Run this script on the current machine using the “jamf runScript”
command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_parameter-instance_method" title="#set_parameter (instance method)">- (void) <strong>set_parameter</strong>(param_num, new_val) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Change one of the stored parameters.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Boolean) <strong>update</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Updatable.html#update-instance_method" title="JSS::Updatable#update (method)">Updatable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save changes to the JSS.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#upload_master_file-instance_method" title="#upload_master_file (instance method)">- (void) <strong>upload_master_file</strong>(rw_pw, unmount = true) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Save the @script_contents for this script to a file on the Master
Distribution point.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="JSS::Script (class)">Script</a></span></tt>) <strong>initialize</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of Script</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 139</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span> <span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_super super kw'>super</span>

  <span class='rubyid_@category ivar id'>@category</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_APIObject constant id'>APIObject</span><span class='dot token'>.</span><span class='rubyid_get_name identifier id'>get_name</span><span class='lparen token'>(</span><span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:category</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_@filename ivar id'>@filename</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:filename</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_@info ivar id'>@info</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:info</span><span class='rbrack token'>]</span>
  <span class='rubyid_@notes ivar id'>@notes</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:notes</span><span class='rbrack token'>]</span>
  <span class='rubyid_@os_requirements ivar id'>@os_requirements</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:os_requirements</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_to_s_and_a identifier id'>to_s_and_a</span><span class='lparen token'>(</span><span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:os_requirements</span><span class='rbrack token'>]</span> <span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='symbol val'>:arrayform</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_@parameters ivar id'>@parameters</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:parameters</span><span class='rbrack token'>]</span> <span class='question op'>?</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:parameters</span><span class='rbrack token'>]</span> <span class='colon op'>:</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_@priority ivar id'>@priority</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:priority</span><span class='rbrack token'>]</span> <span class='orop op'>||</span> <span class='rubyid_DEFAULT_PRIORITY constant id'>DEFAULT_PRIORITY</span>
  <span class='rubyid_@script_contents ivar id'>@script_contents</span> <span class='assign token'>=</span>  <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:script_contents</span><span class='rbrack token'>]</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="category=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="category-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>category</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the category of this script, stored in the JSS as the id number
from the categories table</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the category of this script, stored in the JSS as the id number from the
categories table</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 123</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_category identifier id'>category</span>
  <span class='rubyid_@category ivar id'>@category</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="filename=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="filename-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>filename</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the file name of the script, if stored in a dist. point</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the file name of the script, if stored in a dist. point</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 108</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_filename identifier id'>filename</span>
  <span class='rubyid_@filename ivar id'>@filename</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    - (<tt>Integer</tt>) <strong>id</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#id-instance_method" title="JSS::APIObject#id (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the JSS id number</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the JSS id number</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="in_jss-instance_method">
  
    - (<tt>Boolean</tt>) <strong>in_jss</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='in_jss?-instance_method'>in_jss?</span></span>
    </span>
  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#in_jss-instance_method" title="JSS::APIObject#in_jss (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns is it in the JSS?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>is it in the JSS?</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id="info=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="info-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>info</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the info field for this script</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the info field for this script</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 117</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_info identifier id'>info</span>
  <span class='rubyid_@info ivar id'>@info</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>name</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#name-instance_method" title="JSS::APIObject#name (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="need_to_update-instance_method">
  
    - (<tt>Boolean</tt>) <strong>need_to_update</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Updatable.html#need_to_update-instance_method" title="JSS::Updatable#need_to_update (method)">Updatable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns do we have unsaved changes?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>do we have unsaved changes?</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id="notes=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="notes-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>notes</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the notes field for this script</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the notes field for this script</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


120
121
122</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 120</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_notes identifier id'>notes</span>
  <span class='rubyid_@notes ivar id'>@notes</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="os_requirements=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="os_requirements-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>os_requirements</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='oses-instance_method'>oses</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the OS versions this can be installed onto. For all minor versions,
the format is 10.5.x</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the OS versions this can be installed onto. For all minor versions, the
format is 10.5.x</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 111</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_os_requirements identifier id'>os_requirements</span>
  <span class='rubyid_@os_requirements ivar id'>@os_requirements</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="parameters=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="parameters-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>) <strong>parameters</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns script parameters 4-11. Parameters 1-3 are predefined as target
drive, computer name, and username</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>script parameters 4-11. Parameters 1-3 are predefined as target drive,
computer name, and username</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 126</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_parameters identifier id'>parameters</span>
  <span class='rubyid_@parameters ivar id'>@parameters</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="priority=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="priority-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>priority</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns either ‘Before’ or ‘After’ or “At Reboot”.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>either ‘Before’ or ‘After’ or “At Reboot”.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 114</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_priority identifier id'>priority</span>
  <span class='rubyid_@priority ivar id'>@priority</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="rest_rsrc-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>rest_rsrc</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#rest_rsrc-instance_method" title="JSS::APIObject#rest_rsrc (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the Rest resource for API access (the part after “JSSResource/”
)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Rest resource for API access (the part after “JSSResource/” )</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id="script_contents=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="script_contents-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>script_contents</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the actual code for this script, if it’s stored in the database.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the actual code for this script, if it’s stored in the database.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


129
130
131</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 129</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_script_contents identifier id'>script_contents</span>
  <span class='rubyid_@script_contents ivar id'>@script_contents</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="create-instance_method">
  
    - (<tt>Integer</tt>) <strong>create</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Creatable.html#create-instance_method" title="JSS::Creatable#create (method)">Creatable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new object in the JSS.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the jss ID of the newly created object</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="UnsupportedError.html" title="JSS::UnsupportedError (class)">JSS::UnsupportedError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_master_file-instance_method">
  
    - (<tt>Boolean</tt>) <strong>delete_master_file</strong>(rw_pw, unmount = true) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Delete the filename from the master distribution point, if it exists.</p>

<p>If you’ll be uploading several files you can specify unmount as false,
and do it manually when all are finished.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rw_pw</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the password for the read/write account on the master Distribution Point</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>unmount</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether or not ot unount the distribution point when finished.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>was the file deleted?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


417
418
419
420
421
422
423
424
425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 417</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_delete_master_file identifier id'>delete_master_file</span><span class='lparen token'>(</span><span class='rubyid_rw_pw identifier id'>rw_pw</span><span class='comma token'>,</span> <span class='rubyid_unmount identifier id'>unmount</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_file identifier id'>file</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_DistributionPoint constant id'>DistributionPoint</span><span class='dot token'>.</span><span class='rubyid_master_distribution_point identifier id'>master_distribution_point</span><span class='dot token'>.</span><span class='rubyid_mount identifier id'>mount</span><span class='lparen token'>(</span><span class='rubyid_rw_pw identifier id'>rw_pw</span><span class='comma token'>,</span> <span class='symbol val'>:rw</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;#{DIST_POINT_SCRIPTS_FOLDER}/#{@filename}&quot;</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_file identifier id'>file</span><span class='dot token'>.</span><span class='rubyid_exist? fid id'>exist?</span>
    <span class='rubyid_file identifier id'>file</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span>
    <span class='rubyid_did_it identifier id'>did_it</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_did_it identifier id'>did_it</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_end end kw'>end</span> <span class='comment val'># if exists</span>
  <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_DistributionPoint constant id'>DistributionPoint</span><span class='dot token'>.</span><span class='rubyid_master_distribution_point identifier id'>master_distribution_point</span><span class='dot token'>.</span><span class='rubyid_unmount identifier id'>unmount</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_unmount identifier id'>unmount</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_did_it identifier id'>did_it</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="name=-instance_method">
  
    - (<tt>void</tt>) <strong>name=</strong>(new_val) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Change the script’s display name</p>

<p>If the filename is the same as the name, the filename  will be changed also</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>new_val</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the new display name</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MissingDataError.html" title="JSS::MissingDataError (class)">JSS::MissingDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


185
186
187
188
189
190
191
192
193
194
195
196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 185</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_name= identifier id'>name=</span> <span class='lparen token'>(</span><span class='rubyid_new_val identifier id'>new_val</span><span class='rparen token'>)</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_new_val identifier id'>new_val</span> <span class='eq op'>==</span> <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_new_val identifier id'>new_val</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_new_val identifier id'>new_val</span> <span class='eq op'>==</span> <span class='string val'>''</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_MissingDataError constant id'>MissingDataError</span><span class='comma token'>,</span> <span class='string val'>&quot;Name can't be empty&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_new_val identifier id'>new_val</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_AlreadyExistsError constant id'>AlreadyExistsError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;A #{RSRC_OBJECT_KEY} already exists with the name '#{args[:name]}'&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_send identifier id'>send</span><span class='lparen token'>(</span><span class='rubyid_LIST_METHOD constant id'>LIST_METHOD</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span>

  <span class='comment val'>### if the filename is the same, keep it the same</span>
  <span class='rubyid_@filename ivar id'>@filename</span> <span class='assign token'>=</span> <span class='rubyid_new_val identifier id'>new_val</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@filename ivar id'>@filename</span> <span class='eq op'>==</span> <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_@name ivar id'>@name</span> <span class='assign token'>=</span> <span class='rubyid_new_val identifier id'>new_val</span>

  <span class='comment val'>### if our REST resource is based on the name, update that too</span>
  <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;#{RSRC_BASE}/name/#{URI.escape @name}&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@rest_rsrc ivar id'>@rest_rsrc</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='string val'>'/name/'</span>
  <span class='rubyid_@need_to_update ivar id'>@need_to_update</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rest_xml-instance_method">
  
    - (<tt>Object</tt>) <strong>rest_xml</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return the xml for creating or updating this script in the JSS</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 606</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_rest_xml identifier id'>rest_xml</span>
  <span class='rubyid_doc identifier id'>doc</span> <span class='assign token'>=</span> <span class='rubyid_REXML constant id'>REXML</span><span class='colon2 op'>::</span><span class='rubyid_Document constant id'>Document</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span>
  <span class='rubyid_scpt identifier id'>scpt</span> <span class='assign token'>=</span> <span class='rubyid_doc identifier id'>doc</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span> <span class='string val'>&quot;script&quot;</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'category'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@category ivar id'>@category</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'filename'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@filename ivar id'>@filename</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'id'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@id ivar id'>@id</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'info'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@info ivar id'>@info</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'name'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@name ivar id'>@name</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'notes'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@notes ivar id'>@notes</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'os_requirements'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_to_s_and_a identifier id'>to_s_and_a</span><span class='lparen token'>(</span><span class='rubyid_@os_requirements ivar id'>@os_requirements</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='symbol val'>:stringform</span><span class='rbrack token'>]</span>
  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'priority'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@priority ivar id'>@priority</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>
    <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'parameters'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_pars identifier id'>pars</span> <span class='assign token'>=</span> <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'parameters'</span><span class='rparen token'>)</span>
    <span class='rubyid_PARAMETER_KEYS constant id'>PARAMETER_KEYS</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_p identifier id'>p</span><span class='bitor op'>|</span> <span class='rubyid_pars identifier id'>pars</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='rubyid_p identifier id'>p</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='rubyid_p identifier id'>p</span><span class='rbrack token'>]</span><span class='rbrace token'>}</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_scpt identifier id'>scpt</span><span class='dot token'>.</span><span class='rubyid_add_element identifier id'>add_element</span><span class='lparen token'>(</span><span class='string val'>'script_contents_encoded'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_text identifier id'>text</span> <span class='assign token'>=</span> <span class='rubyid_Base64 constant id'>Base64</span><span class='dot token'>.</span><span class='rubyid_encode64 identifier id'>encode64</span><span class='lparen token'>(</span><span class='rubyid_@script_contents ivar id'>@script_contents</span><span class='rparen token'>)</span>

  <span class='rubyid_return return kw'>return</span> <span class='rubyid_doc identifier id'>doc</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;(Integer,<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>)&gt;</tt>) <strong>run</strong>(opts = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Run this script on the current machine using the “jamf runScript”
command.</p>

<p>If the script code is available in the <span class='object_link'><a href="#script_contents-instance_method" title="JSS::Script#script_contents (method)">#script_contents</a></span> attribute, then
that code is saved to a tmp file, and executed. Otherwise, the script is
assumed to be stored on the distribution point.</p>

<p>If the dist. point has http downloads enabled, then the URL is used as the
path with the ‘jamf runScript’ command.</p>

<p>If http is not an option, the dist.point is mounted, and the script copied
locally before running. In this case the options must include :ro_pw =&gt;
‘somepass’ to provide the read-only password for mounting the
distribution point. If :unmount =&gt; true is provided, the dist. point
will be unmounted immediately after copying the script locally.  Otherwise
it will remain mounted, in case there’s further need of it.</p>

<p>Any local on-disk copies of the script are removed after running.</p>

<p>After the script runs, this method returns a two-item Array.</p>
<ul><li>
<p>the first item is an Integer, the exit status of the script itself (0 means
success)</p>
</li><li>
<p>the second item is a String, the output (stdout + stderr) of the jamf
binary, which will include the script output.</p>
</li></ul>

<p>The exit status of the jamf binary process will be available as a
Process::Status object in $? immediately after running.</p>

<p><strong>NOTE</strong> In the WEB UI and API, the definable parameters are
numbered 4-11, since 1, 2, &amp; 3 are the target drive, computer name, and
user name respectively.  However, the jamf binary refers to them as p1-p8,
and that’s how they are expected as options to #run. So if :p1=&gt;
“new param” is given as an aption to #run, it will override any value
that the API provided in @<a href=":parameter4">parameters</a></p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the options for running the script</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:target</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt><span class='object_link'><a href="../Pathname.html" title="Pathname (class)">Pathname</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>the ‘target drive’, passed to the script as the first commandline
option. Defaults to ‘/’</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:computer_name</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>the name of the computer, passed to the script as the second commandline
option. Defaults to the name of the current machine</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:username</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>the username to be passed to the script as the third commandline option.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:p1..:p8</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>the values to be passed as the 4th - 11th commandline options, overriding
those defined with the script in the JSS</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:ro_pw</span>
          <span class="type">(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>the read-only password for mounting the distribution point, if needed</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:unmount</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>should the dist. point be unmounted when finished, if we mounted it?</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:verbose</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>should the ‘jamf runScript’ command be verbose?</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:show_output</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'>
<p>should the output (stdout + stderr) of ‘jamf runScript’ be copied to
stdout in realtime, as well as returned?</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;(Integer,<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>)&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the exit status of the <strong>script</strong> and stdout+stderr of ‘jamf
runScript’. The exit status of the jamf binary will be available in $?
immediately after running.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 485</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_run identifier id'>run</span><span class='lparen token'>(</span> <span class='rubyid_opts identifier id'>opts</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span> <span class='rparen token'>)</span>

  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:target</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='string val'>&quot;/&quot;</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p1</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter4</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p2</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter5</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p3</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter6</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p4</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter7</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p5</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter8</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p6</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter9</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p7</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter10</span><span class='rbrack token'>]</span>
  <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p8</span><span class='rbrack token'>]</span> <span class='opasgn op'>||=</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='symbol val'>:parameter11</span><span class='rbrack token'>]</span>

  <span class='rubyid_dp_mount_pt identifier id'>dp_mount_pt</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_delete_exec identifier id'>delete_exec</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>

  <span class='rubyid_begin begin kw'>begin</span>

    <span class='comment val'># do we have the code already? if so, save it out and make it executable</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span> <span class='rubyid_and and kw'>and</span> <span class='lparen token'>(</span><span class='rubyid_not not kw'>not</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span><span class='rparen token'>)</span>

      <span class='rubyid_script_path identifier id'>script_path</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Client constant id'>Client</span><span class='colon2 op'>::</span><span class='rubyid_DOWNLOADS_FOLDER constant id'>DOWNLOADS_FOLDER</span>

      <span class='rubyid_executable identifier id'>executable</span> <span class='assign token'>=</span> <span class='rubyid_script_path identifier id'>script_path</span> <span class='plus op'>+</span> <span class='rubyid_@filename ivar id'>@filename</span>

      <span class='rubyid_executable identifier id'>executable</span><span class='dot token'>.</span><span class='rubyid_jss_touch identifier id'>jss_touch</span>
      <span class='rubyid_executable identifier id'>executable</span><span class='dot token'>.</span><span class='rubyid_chmod identifier id'>chmod</span> <span class='integer val'>0700</span>
      <span class='rubyid_executable identifier id'>executable</span><span class='dot token'>.</span><span class='rubyid_jss_save identifier id'>jss_save</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span>
      <span class='rubyid_delete_exec identifier id'>delete_exec</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>

    <span class='comment val'># otherwise, get it from the dist. point</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_dist_point identifier id'>dist_point</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_DistributionPoint constant id'>DistributionPoint</span><span class='dot token'>.</span><span class='rubyid_my_distribution_point identifier id'>my_distribution_point</span>

      <span class='comment val'>### how do we access our dist. point?</span>
      <span class='rubyid_if if kw'>if</span> <span class='rubyid_dist_point identifier id'>dist_point</span><span class='dot token'>.</span><span class='rubyid_http_downloads_enabled identifier id'>http_downloads_enabled</span>
        <span class='rubyid_script_path identifier id'>script_path</span> <span class='assign token'>=</span> <span class='rubyid_dist_point identifier id'>dist_point</span><span class='dot token'>.</span><span class='rubyid_http_url identifier id'>http_url</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;/#{DIST_POINT_SCRIPTS_FOLDER}/&quot;</span>

      <span class='rubyid_else else kw'>else</span>
        <span class='rubyid_dp_mount_pt identifier id'>dp_mount_pt</span> <span class='assign token'>=</span> <span class='rubyid_dist_point identifier id'>dist_point</span><span class='dot token'>.</span><span class='rubyid_mount identifier id'>mount</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:ro_pw</span><span class='rbrack token'>]</span>

        <span class='rubyid_script_path identifier id'>script_path</span> <span class='assign token'>=</span> <span class='lparen token'>(</span><span class='rubyid_dp_mount_pt identifier id'>dp_mount_pt</span> <span class='plus op'>+</span> <span class='rubyid_DIST_POINT_SCRIPTS_FOLDER constant id'>DIST_POINT_SCRIPTS_FOLDER</span><span class='rparen token'>)</span>

      <span class='rubyid_end end kw'>end</span> <span class='comment val'># if http enabled</span>

    <span class='rubyid_end end kw'>end</span> <span class='comment val'># if @script_contents and (not @script_contents.empty?)</span>


    <span class='comment val'># build the command as an array.</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='string val'>&quot;-script&quot;</span><span class='comma token'>,</span> <span class='rubyid_@filename ivar id'>@filename</span><span class='comma token'>,</span> <span class='string val'>'-path'</span><span class='comma token'>,</span> <span class='rubyid_script_path identifier id'>script_path</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-target&quot;</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:target</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-computerName&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:computer_name</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:computer_name</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:computer_name</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-username&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:username</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:username</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:username</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p1&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p1</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p1</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p1</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p2&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p2</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p2</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p2</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p3&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p3</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p3</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p3</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p4&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p4</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p4</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p4</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p5&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p5</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p5</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p5</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p6&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p6</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p6</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p6</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p7&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p7</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p7</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p7</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-p8&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p8</span><span class='rbrack token'>]</span>
    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p8</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:p8</span><span class='rbrack token'>]</span>

    <span class='rubyid_command_arry identifier id'>command_arry</span> <span class='lshft op'>&lt;&lt;</span> <span class='string val'>&quot;-verbose&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:verbose</span><span class='rbrack token'>]</span>

    <span class='rubyid_command identifier id'>command</span> <span class='assign token'>=</span> <span class='rubyid_command_arry identifier id'>command_arry</span><span class='dot token'>.</span><span class='rubyid_shelljoin identifier id'>shelljoin</span>

    <span class='rubyid_jamf_output identifier id'>jamf_output</span> <span class='assign token'>=</span>  <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_Client constant id'>Client</span><span class='dot token'>.</span><span class='rubyid_run_jamf identifier id'>run_jamf</span> <span class='string val'>&quot;runScript&quot;</span><span class='comma token'>,</span> <span class='rubyid_command identifier id'>command</span><span class='comma token'>,</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:show_output</span><span class='rbrack token'>]</span>

    <span class='rubyid_jamf_output identifier id'>jamf_output</span> <span class='match op'>=~</span> <span class='regexp val'>/^.*Script exit code: (\d+)(\D|$)/</span>

    <span class='rubyid_script_exitstatus identifier id'>script_exitstatus</span> <span class='assign token'>=</span> <span class='rubyid_$1 nth_ref id'>$1</span><span class='dot token'>.</span><span class='rubyid_to_i identifier id'>to_i</span>

  <span class='rubyid_ensure ensure kw'>ensure</span>
    <span class='rubyid_executable identifier id'>executable</span><span class='dot token'>.</span><span class='rubyid_delete identifier id'>delete</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_delete_exec identifier id'>delete_exec</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_executable identifier id'>executable</span><span class='dot token'>.</span><span class='rubyid_exist? fid id'>exist?</span>
    <span class='rubyid_dist_point identifier id'>dist_point</span><span class='dot token'>.</span><span class='rubyid_unmount identifier id'>unmount</span> <span class='rubyid_if if_mod kw'>if</span> <span class='lparen token'>(</span><span class='rubyid_dp_mount_pt identifier id'>dp_mount_pt</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_dp_mount_pt identifier id'>dp_mount_pt</span><span class='dot token'>.</span><span class='rubyid_mountpoint? fid id'>mountpoint?</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_opts identifier id'>opts</span><span class='lbrack token'>[</span><span class='symbol val'>:unmount</span><span class='rbrack token'>]</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span> <span class='comment val'># begin/ensure</span>

  <span class='rubyid_return return kw'>return</span> <span class='lbrack token'>[</span><span class='rubyid_script_exitstatus identifier id'>script_exitstatus</span><span class='comma token'>,</span> <span class='rubyid_jamf_output identifier id'>jamf_output</span><span class='rbrack token'>]</span>

<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_parameter-instance_method">
  
    - (<tt>void</tt>) <strong>set_parameter</strong>(param_num, new_val) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Change one of the stored parameters</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>param_num</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>which param are we setting? must be 4..11</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>new_val</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the new value for the parameter</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="NoSuchItemError.html" title="JSS::NoSuchItemError (class)">JSS::NoSuchItemError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 335</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_set_parameter identifier id'>set_parameter</span> <span class='lparen token'>(</span><span class='rubyid_param_num identifier id'>param_num</span><span class='comma token'>,</span> <span class='rubyid_new_val identifier id'>new_val</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NoSuchItemError constant id'>NoSuchItemError</span><span class='comma token'>,</span> <span class='string val'>&quot;Parameter numbers must be from 4-11&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='lparen token'>(</span><span class='float val'>4</span><span class='dot2 op'>..</span><span class='integer val'>11</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_param_num identifier id'>param_num</span>
  <span class='rubyid_pkey identifier id'>pkey</span> <span class='assign token'>=</span> <span class='dstring node'>&quot;parameter#{param_num}&quot;</span><span class='dot token'>.</span><span class='rubyid_to_sym identifier id'>to_sym</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidDataError constant id'>InvalidDataError</span><span class='comma token'>,</span> <span class='string val'>&quot;parameter values must be strings or nil&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_new_val identifier id'>new_val</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_new_val identifier id'>new_val</span><span class='dot token'>.</span><span class='rubyid_kind_of? fid id'>kind_of?</span> <span class='rubyid_String constant id'>String</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_new_val identifier id'>new_val</span> <span class='eq op'>==</span> <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='rubyid_pkey identifier id'>pkey</span><span class='rbrack token'>]</span>
  <span class='rubyid_@parameters ivar id'>@parameters</span><span class='lbrack token'>[</span><span class='rubyid_pkey identifier id'>pkey</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_new_val identifier id'>new_val</span>
  <span class='rubyid_@need_to_update ivar id'>@need_to_update</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update-instance_method">
  
    - (<tt>Boolean</tt>) <strong>update</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Updatable.html#update-instance_method" title="JSS::Updatable#update (method)">Updatable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Save changes to the JSS</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>success</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="UnsupportedError.html" title="JSS::UnsupportedError (class)">JSS::UnsupportedError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="upload_master_file-instance_method">
  
    - (<tt>void</tt>) <strong>upload_master_file</strong>(rw_pw, unmount = true) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>
<p>Save the @script_contents for this script to a file on the Master
Distribution point.</p>

<p>If you’ll be uploading several files you can specify unmount as false,
and do it manually when all are finished.</p>

<p>use <span class='object_link'><a href="#script_contents%3D-instance_method" title="JSS::Script#script_contents= (method)">#script_contents=</a></span>  to set the script_contents from a String or
Pathname</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>rw_pw</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the password for the read/write account on the master Distribution Point</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>unmount</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether or not ot unount the distribution point when finished.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MissingDataError.html" title="JSS::MissingDataError (class)">JSS::MissingDataError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


394
395
396
397
398
399
400
401
402
403</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/script.rb', line 394</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_upload_master_file identifier id'>upload_master_file</span><span class='lparen token'>(</span> <span class='rubyid_rw_pw identifier id'>rw_pw</span><span class='comma token'>,</span> <span class='rubyid_unmount identifier id'>unmount</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span><span class='rparen token'>)</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_MissingDataError constant id'>MissingDataError</span><span class='comma token'>,</span> <span class='string val'>&quot;No code specified. Use #code= first.&quot;</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='rubyid_or or kw'>or</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span>

  <span class='rubyid_mdp identifier id'>mdp</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_DistributionPoint constant id'>DistributionPoint</span><span class='dot token'>.</span><span class='rubyid_master_distribution_point identifier id'>master_distribution_point</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvaldDatatError constant id'>InvaldDatatError</span><span class='comma token'>,</span> <span class='string val'>&quot;Incorrect password for read-write access to master distribution point.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_mdp identifier id'>mdp</span><span class='dot token'>.</span><span class='rubyid_check_pw identifier id'>check_pw</span> <span class='symbol val'>:rw</span><span class='comma token'>,</span> <span class='rubyid_rw_pw identifier id'>rw_pw</span>

  <span class='rubyid_destination identifier id'>destination</span> <span class='assign token'>=</span> <span class='rubyid_mdp identifier id'>mdp</span><span class='dot token'>.</span><span class='rubyid_mount identifier id'>mount</span><span class='lparen token'>(</span><span class='rubyid_rw_pw identifier id'>rw_pw</span><span class='comma token'>,</span> <span class='symbol val'>:rw</span><span class='rparen token'>)</span> <span class='plus op'>+</span> <span class='dstring node'>&quot;#{DIST_POINT_SCRIPTS_FOLDER}/#{@filename}&quot;</span>
  <span class='rubyid_destination identifier id'>destination</span><span class='dot token'>.</span><span class='rubyid_save identifier id'>save</span> <span class='rubyid_@script_contents ivar id'>@script_contents</span>
  <span class='rubyid_mdp identifier id'>mdp</span><span class='dot token'>.</span><span class='rubyid_unmount identifier id'>unmount</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_unmount identifier id'>unmount</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Oct 17 10:17:32 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.8.7).
</div>

  </body>
</html>