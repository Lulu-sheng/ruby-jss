<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: JSS::LDAPServer
  
    &mdash; The JSS Ruby Gem - access to the CasperSuite API
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!JSS/LDAPServer.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (L)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../JSS.html" title="JSS (module)">JSS</a></span></span>
     &raquo; 
    <span class="title">LDAPServer</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: JSS::LDAPServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></li>
          
            <li class="next">JSS::LDAPServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/jss/api_object/ldap_server.rb<span class="defines">,<br />
  lib/jss.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>An LDAP server in the JSS.</p>

<p>This class doesn’t curretly provide creation or updaing of LDAP server
definitions in the JSS. Please use the JSS web UI.</p>

<p>However, it does provide methods for querying users and usergroups from
LDAP servers, and checking group membership.</p>

<p>When an LDAPServer instance is created, if it uses anonymous binding for
lookups (the Authentication Type is set to ‘none’) then  the LDAP
connection is established immediately. Otherwise, you must use the
<span class='object_link'><a href="#connect-instance_method" title="JSS::LDAPServer#connect (method)">#connect</a></span> method, and provide the appropriate password for the lookup
account defined.</p>

<p>Since LDAP server connections are used to verify the validity of LDAP users
&amp; groups used in  scopes, if you don’t connect to all LDAP servers
before modifying any scope’s user &amp; group limitations or exceptions,
those new values may not be verifiable. Unverified limitations and
exceptions, when sent to the API, will result in a REST 409 Conflict error
if the user or  group doesn’t exist. Unfortunately, 409 Conflict errors
are very generic and don’t indicate the source of the problem (in this
case, a non-existent user or group limitation or exception to the  scope).
The <span class='object_link'><a href="Scopable.html" title="JSS::Scopable (module)">Scopable</a></span> module tries to catch these errors and raise a more
useful exception when they happen.</p>

<p>The class method <span class='object_link'><a href="#all_ldaps-class_method" title="JSS::LDAPServer.all_ldaps (method)">LDAPServer.all_ldaps</a></span> returns a Hash of JSS::LDAPServer
instances. one for each server defined in the JSS.</p>

<p>The class methods <span class='object_link'><a href="#user_in_ldap%3F-class_method" title="JSS::LDAPServer.user_in_ldap? (method)">LDAPServer.user_in_ldap?</a></span> and
<span class='object_link'><a href="#group_in_ldap%3F-class_method" title="JSS::LDAPServer.group_in_ldap? (method)">LDAPServer.group_in_ldap?</a></span> can be used to check all defined LDAP servers
for a user or group. They are used by <span class='object_link'><a href="Scopable/Scope.html" title="JSS::Scopable::Scope (class)">Scopable::Scope</a></span> when adding
user and groups to scope limitations and exceptions.</p>

<p>Within an LDAPServer instance, the methods <span class='object_link'><a href="#find_user-instance_method" title="JSS::LDAPServer#find_user (method)">#find_user</a></span> and <span class='object_link'><a href="#find_group-instance_method" title="JSS::LDAPServer#find_group (method)">#find_group</a></span>
will return all matches in the server for a given search term.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="APIObject.html" title="JSS::APIObject (class)">APIObject</a></span></li>
    
  </ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RSRC_BASE-constant" class="">RSRC_BASE =
          <div class="docstring">
  <div class="discussion">
    
<p>The base for REST resources of this class</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='string val'>&quot;ldapservers&quot;</span>
</pre></dd>
      
        <dt id="RSRC_LIST_KEY-constant" class="">RSRC_LIST_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>the hash key used for the JSON list output of all objects in the JSS</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol val'>:ldap_servers</span>
</pre></dd>
      
        <dt id="RSRC_OBJECT_KEY-constant" class="">RSRC_OBJECT_KEY =
          <div class="docstring">
  <div class="discussion">
    
<p>The hash key used for the JSON object output. It’s also used in various
error messages</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='symbol val'>:ldap_server</span>
</pre></dd>
      
        <dt id="VALID_DATA_KEYS-constant" class="">VALID_DATA_KEYS =
          <div class="docstring">
  <div class="discussion">
    
<p>these keys, as well as :id and :name,  are present in valid API JSON data
for this class</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="DEFAULT_PORT-constant" class="">DEFAULT_PORT =
          <div class="docstring">
  <div class="discussion">
    
<p>the default LDAP port</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='integer val'>389</span>
</pre></dd>
      
        <dt id="SEARCH_SCOPES-constant" class="">SEARCH_SCOPES =
          <div class="docstring">
  <div class="discussion">
    
<p>possible values for search scope</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='string val'>&quot;All Subtrees&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;First Level Only&quot;</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="AUTH_TYPES-constant" class="">AUTH_TYPES =
          <div class="docstring">
  <div class="discussion">
    
<p>possible authentication types</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrace token'>{</span><span class='string val'>'none'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:anonymous</span><span class='comma token'>,</span> <span class='string val'>'simple'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:simple</span><span class='comma token'>,</span> <span class='string val'>'CRAM-MD5'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:cram_md5</span><span class='comma token'>,</span> <span class='string val'>'DIGEST-MD5'</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='symbol val'>:digest_md5</span> <span class='rbrace token'>}</span>
</pre></dd>
      
        <dt id="REFERRAL_RESPONSES-constant" class="">REFERRAL_RESPONSES =
          <div class="docstring">
  <div class="discussion">
    
<p>possible referral responses</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='string val'>''</span><span class='comma token'>,</span> <span class='rubyid_nil nil kw'>nil</span><span class='comma token'>,</span> <span class='string val'>'follow'</span><span class='comma token'>,</span> <span class='string val'>'ignore'</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="OBJECT_CLASS_MAPPING_OPTIONS-constant" class="">OBJECT_CLASS_MAPPING_OPTIONS =
          <div class="docstring">
  <div class="discussion">
    
<p>possible objectclass mapping options</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='lbrack token'>[</span><span class='string val'>&quot;any&quot;</span><span class='comma token'>,</span> <span class='string val'>&quot;all&quot;</span><span class='rbrack token'>]</span>
</pre></dd>
      
        <dt id="all_ldaps-classvariable" class="">@@all_ldaps =
          <div class="docstring">
  <div class="discussion">
    
<p>Class Variables</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='rubyid_nil nil kw'>nil</span>
</pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#authentication_type-instance_method" title="#authentication_type (instance method)">- (String) <strong>authentication_type</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>What authentication method should be used?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected-instance_method" title="#connected (instance method)">- (Boolean) <strong>connected</strong> </a>
    

    
      (also: #connected?)
    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We we connected to this server at the moment?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#hostanme-instance_method" title="#hostanme (instance method)">- (String) <strong>hostanme</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The hostname of the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Integer) <strong>id</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#id-instance_method" title="JSS::APIObject#id (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The JSS id number.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#in_jss-instance_method" title="#in_jss (instance method)">- (Boolean) <strong>in_jss</strong> </a>
    

    
      (also: #in_jss?)
    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#in_jss-instance_method" title="JSS::APIObject#in_jss (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is it in the JSS?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_dn-instance_method" title="#lookup_dn (instance method)">- (String) <strong>lookup_dn</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Distinguished Name of the account used for connections/lookups?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_pw_sha256-instance_method" title="#lookup_pw_sha256 (instance method)">- (String) <strong>lookup_pw_sha256</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The password for the connection/lookup account, as a SHA256 digest.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (String) <strong>name</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#name-instance_method" title="JSS::APIObject#name (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_close_timeout-instance_method" title="#open_close_timeout (instance method)">- (Integer) <strong>open_close_timeout</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Timeout, in seconds, for opening LDAP connections.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#port-instance_method" title="#port (instance method)">- (Integer) <strong>port</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The port for ldap.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#referral_response-instance_method" title="#referral_response (instance method)">- (String) <strong>referral_response</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The referral response from the server.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest_rsrc-instance_method" title="#rest_rsrc (instance method)">- (String) <strong>rest_rsrc</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      inherited
      from <span class='object_link'><a href="APIObject.html#rest_rsrc-instance_method" title="JSS::APIObject#rest_rsrc (method)">APIObject</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The Rest resource for API access (the part after “JSSResource/” ).</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_timeout-instance_method" title="#search_timeout (instance method)">- (Integer) <strong>search_timeout</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Timeout, in seconds, for search queries.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_ssl-instance_method" title="#use_ssl (instance method)">- (Boolean) <strong>use_ssl</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Should the connection use ssl?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#use_wildcards-instance_method" title="#use_wildcards (instance method)">- (Boolean) <strong>use_wildcards</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Should searches use wildcards?.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_group_mappings-instance_method" title="#user_group_mappings (instance method)">- (Hash&lt;Symbol=&gt;String&gt;) <strong>user_group_mappings</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The LDAP attributes mapped to various user group data.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_group_membership_mappings-instance_method" title="#user_group_membership_mappings (instance method)">- (Hash&lt;Symbol=&gt;String&gt;) <strong>user_group_membership_mappings</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The LDAP attributes used to identify a user as a member of a group.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_mappings-instance_method" title="#user_mappings (instance method)">- (Hash&lt;Symbol=&gt;String&gt;) <strong>user_mappings</strong> </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The LDAP attributes mapped to various user data.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_ldaps-class_method" title="all_ldaps (class method)">+ (Hash{String =&gt; JSS::LDAPServer}) <strong>all_ldaps</strong>(refresh = false) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>JSS::LDAPServer instances for all defined servers.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_in_ldap%3F-class_method" title="group_in_ldap? (class method)">+ (Boolean) <strong>group_in_ldap?</strong>(group) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Does the group exist in any LDAP server?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#user_in_ldap%3F-class_method" title="user_in_ldap? (class method)">+ (Boolean) <strong>user_in_ldap?</strong>(user) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Does the user exist in any LDAP server?.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_membership-instance_method" title="#check_membership (instance method)">- (Boolean<sup>?</sup>) <strong>check_membership</strong>(user, group) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Is the user a member? Nil if unable to check.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect-instance_method" title="#connect (instance method)">- (Boolean) <strong>connect</strong>(pw = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The connect to this LDAP server for subsequent use of the <span class='object_link'><a href="#find_user-instance_method" title="JSS::LDAPServer#find_user (method)">#find_user</a></span>,
<span class='object_link'><a href="#find_group-instance_method" title="JSS::LDAPServer#find_group (method)">#find_group</a></span> and <span class='object_link'><a href="#check_membership-instance_method" title="JSS::LDAPServer#check_membership (method)">#check_membership</a></span> methods.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_group-instance_method" title="#find_group (instance method)">- (Array&lt;Hash&gt;) <strong>find_group</strong>(group, exact = false, additional_filter = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The @user_group_attrs_to_get for all groups matching the query.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_user-instance_method" title="#find_user (instance method)">- (Array&lt;Hash&gt;) <strong>find_user</strong>(user, exact = false, additional_filter = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The @user_attrs_to_get for all usernames matching the query.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (LDAPServer) <strong>initialize</strong>(args = {}) </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>See JSS::APIObject#initialize.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="JSS::LDAPServer (class)">LDAPServer</a></span></tt>) <strong>initialize</strong>(args = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>See JSS::APIObject#initialize</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 271</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_initialize identifier id'>initialize</span> <span class='lparen token'>(</span><span class='rubyid_args identifier id'>args</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
  <span class='rubyid_require identifier id'>require</span> <span class='string val'>'net/ldap'</span>
  <span class='rubyid_super super kw'>super</span>

  <span class='rubyid_@hostname ivar id'>@hostname</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:hostname</span><span class='rbrack token'>]</span>
  <span class='rubyid_@port ivar id'>@port</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:port</span><span class='rbrack token'>]</span>
  <span class='rubyid_@use_ssl ivar id'>@use_ssl</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:use_ssl</span><span class='rbrack token'>]</span>
  <span class='rubyid_@authentication_type ivar id'>@authentication_type</span> <span class='assign token'>=</span> <span class='rubyid_AUTH_TYPES constant id'>AUTH_TYPES</span><span class='lbrack token'>[</span><span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:authentication_type</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span>
  <span class='rubyid_@open_close_timeout ivar id'>@open_close_timeout</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:open_close_timeout</span><span class='rbrack token'>]</span>
  <span class='rubyid_@search_timeout ivar id'>@search_timeout</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:search_timeout</span><span class='rbrack token'>]</span>
  <span class='rubyid_@referral_response ivar id'>@referral_response</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:referral_response</span><span class='rbrack token'>]</span>
  <span class='rubyid_@use_wildcards ivar id'>@use_wildcards</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:use_wildcards</span><span class='rbrack token'>]</span>

  <span class='rubyid_@lookup_dn ivar id'>@lookup_dn</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:account</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:distinguished_username</span><span class='rbrack token'>]</span>
  <span class='rubyid_@lookup_pw_sha256 ivar id'>@lookup_pw_sha256</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:connection</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:account</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:password_sha256</span><span class='rbrack token'>]</span>

  <span class='rubyid_@user_mappings ivar id'>@user_mappings</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:mappings_for_users</span> <span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:user_mappings</span><span class='rbrack token'>]</span>
  <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:mappings_for_users</span> <span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_mappings</span><span class='rbrack token'>]</span>
  <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span> <span class='assign token'>=</span> <span class='rubyid_@init_data ivar id'>@init_data</span><span class='lbrack token'>[</span><span class='symbol val'>:mappings_for_users</span> <span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_membership_mappings</span><span class='rbrack token'>]</span>

  <span class='comment val'># the ldap attributes to retrieve with user lookups</span>
  <span class='comment val'># (all those defined in the user mappings)</span>
  <span class='rubyid_@user_attrs_to_get ivar id'>@user_attrs_to_get</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:username</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_username</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:user_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_id</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:department</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_department</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:building</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_building</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:room</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_room</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:realname</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_realname</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:phone</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_phone</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:email_address</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_email_address</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:position</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_position</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:user_uuid</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_uuid</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_v identifier id'>v</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='rbrace token'>}</span>

  <span class='comment val'># and for groups....</span>
  <span class='rubyid_@user_group_attrs_to_get ivar id'>@user_group_attrs_to_get</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span>
    <span class='symbol val'>:group_id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_id</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:group_name</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span>
    <span class='symbol val'>:group_uuid</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_uuid</span><span class='rbrack token'>]</span>
  <span class='rbrace token'>}</span><span class='dot token'>.</span><span class='rubyid_delete_if identifier id'>delete_if</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_v identifier id'>v</span><span class='bitor op'>|</span> <span class='rubyid_v identifier id'>v</span><span class='dot token'>.</span><span class='rubyid_nil? fid id'>nil?</span> <span class='rbrace token'>}</span>

  <span class='rubyid_@connection ivar id'>@connection</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span>
  <span class='rubyid_@connected ivar id'>@connected</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  
  <span class='comment val'># If we are using anonymous binding, connect now</span>
  <span class='rubyid_connect identifier id'>connect</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@authentication_type ivar id'>@authentication_type</span> <span class='eq op'>==</span> <span class='symbol val'>:anonymous</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="authentication_type-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>authentication_type</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns what authentication method should be used?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>what authentication method should be used?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 180</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_authentication_type identifier id'>authentication_type</span>
  <span class='rubyid_@authentication_type ivar id'>@authentication_type</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="connected-instance_method">
  
    - (<tt>Boolean</tt>) <strong>connected</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='connected?-instance_method'>connected?</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns we we connected to this server at the moment?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>we we connected to this server at the moment?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


262
263
264</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 262</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connected identifier id'>connected</span>
  <span class='rubyid_@connected ivar id'>@connected</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="hostanme-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>hostanme</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the hostname of the server</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the hostname of the server</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 171</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_hostanme identifier id'>hostanme</span>
  <span class='rubyid_@hostanme ivar id'>@hostanme</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    - (<tt>Integer</tt>) <strong>id</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#id-instance_method" title="JSS::APIObject#id (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the JSS id number</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the JSS id number</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="in_jss-instance_method">
  
    - (<tt>Boolean</tt>) <strong>in_jss</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='in_jss?-instance_method'>in_jss?</span></span>
    </span>
  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#in_jss-instance_method" title="JSS::APIObject#in_jss (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns is it in the JSS?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>is it in the JSS?</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="lookup_dn-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>lookup_dn</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the Distinguished Name of the account used for connections/lookups?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Distinguished Name of the account used for connections/lookups?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 183</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_dn identifier id'>lookup_dn</span>
  <span class='rubyid_@lookup_dn ivar id'>@lookup_dn</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="lookup_pw_sha256-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>lookup_pw_sha256</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the password for the connection/lookup account, as a SHA256 digest.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the password for the connection/lookup account, as a SHA256 digest.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 186</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_lookup_pw_sha256 identifier id'>lookup_pw_sha256</span>
  <span class='rubyid_@lookup_pw_sha256 ivar id'>@lookup_pw_sha256</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="name-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>name</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#name-instance_method" title="JSS::APIObject#name (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the name</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the name</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="open_close_timeout-instance_method">
  
    - (<tt>Integer</tt>) <strong>open_close_timeout</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns timeout, in seconds, for opening LDAP connections</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>timeout, in seconds, for opening LDAP connections</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 189</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_open_close_timeout identifier id'>open_close_timeout</span>
  <span class='rubyid_@open_close_timeout ivar id'>@open_close_timeout</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="port-instance_method">
  
    - (<tt>Integer</tt>) <strong>port</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the port for ldap</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the port for ldap</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 174</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_port identifier id'>port</span>
  <span class='rubyid_@port ivar id'>@port</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="referral_response-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>referral_response</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the referral response from the server</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the referral response from the server</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 195</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_referral_response identifier id'>referral_response</span>
  <span class='rubyid_@referral_response ivar id'>@referral_response</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="rest_rsrc-instance_method">
  
    - (<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>) <strong>rest_rsrc</strong>  <span class="extras">(readonly)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in class
        <span class='object_link'><a href="APIObject.html#rest_rsrc-instance_method" title="JSS::APIObject#rest_rsrc (method)">APIObject</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the Rest resource for API access (the part after “JSSResource/”
)</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the Rest resource for API access (the part after “JSSResource/” )</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="search_timeout-instance_method">
  
    - (<tt>Integer</tt>) <strong>search_timeout</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns timeout, in seconds, for search queries</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>timeout, in seconds, for search queries</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


192
193
194</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 192</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_search_timeout identifier id'>search_timeout</span>
  <span class='rubyid_@search_timeout ivar id'>@search_timeout</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="use_ssl-instance_method">
  
    - (<tt>Boolean</tt>) <strong>use_ssl</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns should the connection use ssl?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>should the connection use ssl?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 177</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_use_ssl identifier id'>use_ssl</span>
  <span class='rubyid_@use_ssl ivar id'>@use_ssl</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="use_wildcards-instance_method">
  
    - (<tt>Boolean</tt>) <strong>use_wildcards</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns should searches use wildcards?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>should searches use wildcards?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 198</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_use_wildcards identifier id'>use_wildcards</span>
  <span class='rubyid_@use_wildcards ivar id'>@use_wildcards</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="user_group_mappings-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>user_group_mappings</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The LDAP attributes mapped to various user group data</p>

<p>The hash keys are:</p>
<ul><li>
<p>:search_base =&gt;</p>
</li><li>
<p>:search_scope =&gt;</p>
</li><li>
<p>:object_classes =&gt;</p>
</li><li>
<p>:map_object_class_to_any_or_all =&gt;</p>
</li><li>
<p>:map_group_id =&gt;</p>
</li><li>
<p>:map_group_name =&gt;</p>
</li><li>
<p>:map_group_uuid =&gt;</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 238</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_user_group_mappings identifier id'>user_group_mappings</span>
  <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="user_group_membership_mappings-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>user_group_membership_mappings</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The LDAP attributes used to identify a user as a member of a group</p>

<p>The hash keys are:</p>
<ul><li>
<p>:user_group_membership_stored_in =&gt;</p>
</li><li>
<p>:map_user_membership_use_dn =&gt;</p>
</li><li>
<p>:map_group_membership_to_user_field =&gt;</p>
</li><li>
<p>:group_id =&gt;</p>
</li><li>
<p>:map_object_class_to_any_or_all =&gt;</p>
</li><li>
<p>:append_to_username =&gt;</p>
</li><li>
<p>:username =&gt;</p>
</li><li>
<p>:object_classes =&gt;</p>
</li><li>
<p>:use_dn =&gt;</p>
</li><li>
<p>:search_base =&gt;</p>
</li><li>
<p>:recursive_lookups =&gt;</p>
</li><li>
<p>:search_scope =&gt;</p>
</li><li>
<p>:map_user_membership_to_group_field =&gt;</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 259</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_user_group_membership_mappings identifier id'>user_group_membership_mappings</span>
  <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="user_mappings-instance_method">
  
    - (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>) <strong>user_mappings</strong>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The LDAP attributes mapped to various user data</p>

<p>The hash keys are:</p>
<ul><li>
<p>:search_base =&gt;</p>
</li><li>
<p>:search_scope =&gt;</p>
</li><li>
<p>:object_classes =&gt;</p>
</li><li>
<p>:map_object_class_to_any_or_all =&gt;</p>
</li><li>
<p>:map_username =&gt;</p>
</li><li>
<p>:map_user_id =&gt;</p>
</li><li>
<p>:map_department =&gt;</p>
</li><li>
<p>:map_building =&gt;</p>
</li><li>
<p>:map_room =&gt;</p>
</li><li>
<p>:map_realname =&gt;</p>
</li><li>
<p>:map_phone =&gt;</p>
</li><li>
<p>:map_email_address =&gt;</p>
</li><li>
<p>:map_position =&gt;</p>
</li><li>
<p>:map_user_uuid =&gt;</p>
</li><li>
<p>:append_to_email_results =&gt;</p>
</li></ul>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&lt;Symbol=&gt;<span class='object_link'><a href="../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 222</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_user_mappings identifier id'>user_mappings</span>
  <span class='rubyid_@user_mappings ivar id'>@user_mappings</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="all_ldaps-class_method">
  
    + (<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../String.html" title="String (class)">String</a></span> =&gt; <span class='object_link'><a href="" title="JSS::LDAPServer (class)">JSS::LDAPServer</a></span>}</tt>) <strong>all_ldaps</strong>(refresh = false) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns JSS::LDAPServer instances for all defined servers</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>refresh</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>should the LDAP server data be re-read from the API?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>{<span class='object_link'><a href="../String.html" title="String (class)">String</a></span> =&gt; <span class='object_link'><a href="" title="JSS::LDAPServer (class)">JSS::LDAPServer</a></span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>JSS::LDAPServer instances for all defined servers</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


97
98
99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 97</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all_ldaps identifier id'>all_ldaps</span><span class='lparen token'>(</span><span class='rubyid_refresh identifier id'>refresh</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='rparen token'>)</span>
  <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_refresh identifier id'>refresh</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span>
  
  <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='rbrace token'>}</span>
  <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_LDAPServer constant id'>LDAPServer</span><span class='dot token'>.</span><span class='rubyid_all identifier id'>all</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='lbrace token'>{</span> <span class='bitor op'>|</span><span class='rubyid_svr identifier id'>svr</span><span class='bitor op'>|</span> <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span><span class='lbrack token'>[</span><span class='rubyid_svr identifier id'>svr</span><span class='lbrack token'>[</span><span class='symbol val'>:name</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_LDAPServer constant id'>LDAPServer</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:id</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span><span class='rubyid_svr identifier id'>svr</span><span class='lbrack token'>[</span><span class='symbol val'>:id</span><span class='rbrack token'>]</span><span class='rparen token'>)</span><span class='rbrace token'>}</span>

  <span class='rubyid_@@all_ldaps ivar id'>@@all_ldaps</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="group_in_ldap?-class_method">
  
    + (<tt>Boolean</tt>) <strong>group_in_ldap?</strong>(group) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns does the group exist in any LDAP server?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a group to search for in all LDAP servers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>does the group exist in any LDAP server?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126
127</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 123</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_group_in_ldap? fid id'>group_in_ldap?</span> <span class='lparen token'>(</span><span class='rubyid_group identifier id'>group</span><span class='rparen token'>)</span>
  <span class='rubyid_gotgroup identifier id'>gotgroup</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all_ldaps identifier id'>all_ldaps</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_ldap identifier id'>ldap</span><span class='bitor op'>|</span> <span class='rubyid_gotgroup identifier id'>gotgroup</span> <span class='assign token'>=</span>  <span class='rubyid_true true kw'>true</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_ldap identifier id'>ldap</span><span class='dot token'>.</span><span class='rubyid_find_group identifier id'>find_group</span><span class='lparen token'>(</span><span class='rubyid_group identifier id'>group</span><span class='comma token'>,</span> <span class='symbol val'>:exact</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span> <span class='rbrace token'>}</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_gotgroup identifier id'>gotgroup</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="user_in_ldap?-class_method">
  
    + (<tt>Boolean</tt>) <strong>user_in_ldap?</strong>(user) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns does the user exist in any LDAP server?</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a username to search for in all LDAP servers</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>does the user exist in any LDAP server?</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 112</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_user_in_ldap? fid id'>user_in_ldap?</span> <span class='lparen token'>(</span><span class='rubyid_user identifier id'>user</span><span class='rparen token'>)</span>
  <span class='rubyid_gotuser identifier id'>gotuser</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span>
  <span class='rubyid_self self kw'>self</span><span class='dot token'>.</span><span class='rubyid_all_ldaps identifier id'>all_ldaps</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span><span class='lbrace token'>{</span><span class='bitor op'>|</span><span class='rubyid_ldap identifier id'>ldap</span><span class='bitor op'>|</span> <span class='rubyid_gotuser identifier id'>gotuser</span> <span class='assign token'>=</span>  <span class='rubyid_true true kw'>true</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_ldap identifier id'>ldap</span><span class='dot token'>.</span><span class='rubyid_find_user identifier id'>find_user</span><span class='lparen token'>(</span><span class='rubyid_user identifier id'>user</span><span class='comma token'>,</span> <span class='symbol val'>:exact</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_empty? fid id'>empty?</span> <span class='rbrace token'>}</span>
  <span class='rubyid_return return kw'>return</span> <span class='rubyid_gotuser identifier id'>gotuser</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="check_membership-instance_method">
  
    - (<tt>Boolean</tt><sup>?</sup>) <strong>check_membership</strong>(user, group) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note todo">
    <strong>TODO:</strong>
    <div class='inline'>
<p>Implement checking groups membership in ‘other’ ldap area</p>
</div>
  </div>


<p>Returns is the user a member? Nil if unable to check</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the username to check for memebership in the group</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the group name to see if the user is a member</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>is the user a member? Nil if unable to check</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="InvalidConnectionError.html" title="JSS::InvalidConnectionError (class)">JSS::InvalidConnectionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 449</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_check_membership identifier id'>check_membership</span><span class='lparen token'>(</span><span class='rubyid_user identifier id'>user</span><span class='comma token'>,</span> <span class='rubyid_group identifier id'>group</span><span class='rparen token'>)</span>
  
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidConnectionError constant id'>InvalidConnectionError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Not connected to LDAP server '#{@name}'. Please use #connect first.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_@connected ivar id'>@connected</span>
  
  <span class='rubyid_found_user identifier id'>found_user</span> <span class='assign token'>=</span> <span class='rubyid_find_user identifier id'>find_user</span><span class='lparen token'>(</span><span class='rubyid_user identifier id'>user</span><span class='comma token'>,</span> <span class='symbol val'>:exact</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
  <span class='rubyid_found_group identifier id'>found_group</span> <span class='assign token'>=</span> <span class='rubyid_find_group identifier id'>find_group</span><span class='lparen token'>(</span><span class='rubyid_group identifier id'>group</span><span class='comma token'>,</span> <span class='symbol val'>:exact</span><span class='rparen token'>)</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>

  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NoSuchItemError constant id'>NoSuchItemError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;No user '#{user}' in LDAP.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_found_user identifier id'>found_user</span>
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_NoSuchItemError constant id'>NoSuchItemError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;No group '#{group}' in LDAP.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_found_group identifier id'>found_group</span>

  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_membership_stored_in</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;group object&quot;</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_membership_use_dn</span><span class='rbrack token'>]</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_found_group identifier id'>found_group</span><span class='lbrack token'>[</span><span class='symbol val'>:members</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_found_user identifier id'>found_user</span><span class='lbrack token'>[</span><span class='symbol val'>:dn</span><span class='rbrack token'>]</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_found_group identifier id'>found_group</span><span class='lbrack token'>[</span><span class='symbol val'>:members</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_user identifier id'>user</span>
    <span class='rubyid_end end kw'>end</span>


  <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_membership_stored_in</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;user object&quot;</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:use_dn</span><span class='rbrack token'>]</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_found_user identifier id'>found_user</span><span class='lbrack token'>[</span><span class='symbol val'>:groups</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_found_group identifier id'>found_group</span><span class='lbrack token'>[</span><span class='symbol val'>:dn</span><span class='rbrack token'>]</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_return return kw'>return</span> <span class='rubyid_found_user identifier id'>found_user</span><span class='lbrack token'>[</span><span class='symbol val'>:groups</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_include? fid id'>include?</span> <span class='rubyid_group identifier id'>group</span>
    <span class='rubyid_end end kw'>end</span>


  <span class='rubyid_else else kw'>else</span>
    <span class='comment val'>### To do!!</span>
    <span class='rubyid_return return kw'>return</span> <span class='rubyid_nil nil kw'>nil</span>
    <span class='comment val'># implement a search based on the &quot;other&quot; settings</span>
    <span class='comment val'># This will be 3 searchs</span>
    <span class='comment val'># - one for the username mapping in users</span>
    <span class='comment val'># - one for the gid in groups</span>
    <span class='comment val'># - one for a record linking them in the &quot;other&quot; search base</span>
  <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connect-instance_method">
  
    - (<tt>Boolean</tt>) <strong>connect</strong>(pw = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The connect to this LDAP server for subsequent use of the <span class='object_link'><a href="#find_user-instance_method" title="JSS::LDAPServer#find_user (method)">#find_user</a></span>,
<span class='object_link'><a href="#find_group-instance_method" title="JSS::LDAPServer#find_group (method)">#find_group</a></span> and <span class='object_link'><a href="#check_membership-instance_method" title="JSS::LDAPServer#check_membership (method)">#check_membership</a></span> methods</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>pw</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>, <tt>Symbol</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the LDAP connection password for this server. Can be nil if authentication
type is ‘none’. If :prompt, the user is promted on the commandline to
enter the password for the :user. If :stdin#, the password is read from a
line of std in represented by the digit at #,  so :stdin3 reads the passwd
from the third line of standard input. defaults to line 2,  if no digit is
supplied. see <span class='object_link'><a href="../JSS.html#stdin-class_method" title="JSS.stdin (method)">JSS.stdin</a></span></p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>did we connect to the LDAP server with the defined credentials</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 501</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_connect identifier id'>connect</span><span class='lparen token'>(</span><span class='rubyid_pw identifier id'>pw</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  
  <span class='rubyid_unless unless kw'>unless</span> <span class='rubyid_@authentication_type ivar id'>@authentication_type</span> <span class='eq op'>==</span> <span class='symbol val'>:anonymous</span>
    <span class='comment val'># how do we get the password?</span>
    <span class='rubyid_password identifier id'>password</span> <span class='assign token'>=</span> <span class='rubyid_if if kw'>if</span> <span class='rubyid_pw identifier id'>pw</span> <span class='eq op'>==</span> <span class='symbol val'>:prompt</span>
      <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_prompt_for_password identifier id'>prompt_for_password</span> <span class='dstring node'>&quot;Enter the password for the LDAP connection account '#{@lookup_dn}':&quot;</span>
    <span class='rubyid_elsif elsif kw'>elsif</span> <span class='rubyid_pw identifier id'>pw</span><span class='dot token'>.</span><span class='rubyid_is_a? fid id'>is_a?</span><span class='lparen token'>(</span><span class='rubyid_Symbol constant id'>Symbol</span><span class='rparen token'>)</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_pw identifier id'>pw</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='rubyid_start_with? fid id'>start_with?</span><span class='lparen token'>(</span><span class='string val'>'stdin'</span><span class='rparen token'>)</span>
      <span class='rubyid_pw identifier id'>pw</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span> <span class='match op'>=~</span> <span class='regexp val'>/^stdin(\d+)$/</span>
      <span class='rubyid_line identifier id'>line</span> <span class='assign token'>=</span> <span class='rubyid_$1 nth_ref id'>$1</span>
      <span class='rubyid_line identifier id'>line</span> <span class='opasgn op'>||=</span> <span class='integer val'>2</span>
      <span class='rubyid_JSS constant id'>JSS</span><span class='dot token'>.</span><span class='rubyid_stdin identifier id'>stdin</span> <span class='rubyid_line identifier id'>line</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_pw identifier id'>pw</span>
    <span class='rubyid_end end kw'>end</span>
    
    
    <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidDataError constant id'>InvalidDataError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Incorrect password for LDAP connection account '#{@lookup_dn}'&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_@lookup_pw_sha256 ivar id'>@lookup_pw_sha256</span> <span class='eq op'>==</span> <span class='rubyid_Digest constant id'>Digest</span><span class='colon2 op'>::</span><span class='rubyid_SHA2 constant id'>SHA2</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='integer val'>256</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_update identifier id'>update</span><span class='lparen token'>(</span><span class='rubyid_password identifier id'>password</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span>
  <span class='rubyid_end end kw'>end</span> <span class='comment val'># unless </span>

  <span class='rubyid_@connection ivar id'>@connection</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span> <span class='symbol val'>:host</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@hostname ivar id'>@hostname</span><span class='comma token'>,</span> <span class='symbol val'>:port</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@port ivar id'>@port</span><span class='comma token'>,</span> <span class='symbol val'>:auth</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='lbrace token'>{</span><span class='symbol val'>:method</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@authentication_type ivar id'>@authentication_type</span><span class='comma token'>,</span> <span class='symbol val'>:username</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_@lookup_dn ivar id'>@lookup_dn</span><span class='comma token'>,</span> <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_password identifier id'>password</span> <span class='rbrace token'>}</span>
  
  <span class='rubyid_@connected ivar id'>@connected</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_group-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&gt;</tt>) <strong>find_group</strong>(group, exact = false, additional_filter = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The @user_group_attrs_to_get for all groups matching the query</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the group name to search for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exact</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if true, force an exact match, otherwuse use wildcards if @use_wildcards is
true</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>additional_filter</span>
      
      
        <span class='type'>(<tt>Net::LDAP::Fliter</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an additional filter to be AND’d to the existing filter.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The @user_group_attrs_to_get for all groups matching the query</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="InvalidConnectionError.html" title="JSS::InvalidConnectionError (class)">JSS::InvalidConnectionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 392</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_find_group identifier id'>find_group</span><span class='lparen token'>(</span><span class='rubyid_group identifier id'>group</span><span class='comma token'>,</span> <span class='rubyid_exact identifier id'>exact</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='comma token'>,</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidConnectionError constant id'>InvalidConnectionError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Not connected to LDAP server '#{@name}'. Please use #connect first.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_@connected ivar id'>@connected</span>
  
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@use_wildcards ivar id'>@use_wildcards</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_exact identifier id'>exact</span>
    <span class='rubyid_group_filter identifier id'>group_filter</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_contains identifier id'>contains</span><span class='lparen token'>(</span><span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_group identifier id'>group</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_group_filter identifier id'>group_filter</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_name</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_group identifier id'>group</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># limit the object classes</span>
  <span class='rubyid_ocs identifier id'>ocs</span> <span class='assign token'>=</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:object_classes</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='rubyid_chomp identifier id'>chomp</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/,\s*/</span><span class='rparen token'>)</span>
  <span class='rubyid_anyall identifier id'>anyall</span> <span class='assign token'>=</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_object_class_to_any_or_all</span><span class='rbrack token'>]</span>
  <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span>  <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_ocs identifier id'>ocs</span><span class='dot token'>.</span><span class='rubyid_shift identifier id'>shift</span><span class='rparen token'>)</span>
  <span class='rubyid_ocs identifier id'>ocs</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_oc identifier id'>oc</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_anyall identifier id'>anyall</span> <span class='eq op'>==</span> <span class='string val'>&quot;any&quot;</span>
      <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitor op'>|</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_oc identifier id'>oc</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_oc identifier id'>oc</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_group_filter identifier id'>group_filter</span>
  <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='assign token'>=</span> <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span>
  <span class='rubyid_treebase identifier id'>treebase</span> <span class='assign token'>=</span> <span class='rubyid_@user_group_mappings ivar id'>@user_group_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:search_base</span><span class='rbrack token'>]</span>
  <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='assign token'>=</span> <span class='rubyid_@user_group_attrs_to_get ivar id'>@user_group_attrs_to_get</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span>

  <span class='comment val'># should we grab membership from the group?</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_membership_stored_in</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;group object&quot;</span> <span class='rubyid_and and kw'>and</span> \
    <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_membership_to_group_field</span><span class='rbrack token'>]</span>
    <span class='rubyid_get_members identifier id'>get_members</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
    <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_membership_to_group_field</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_results identifier id'>results</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>
  <span class='rubyid_@connection ivar id'>@connection</span><span class='dot token'>.</span><span class='rubyid_search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:base</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_treebase identifier id'>treebase</span><span class='comma token'>,</span> <span class='symbol val'>:filter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_full_filter identifier id'>full_filter</span><span class='comma token'>,</span> <span class='symbol val'>:attributes</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_entry identifier id'>entry</span><span class='bitor op'>|</span>
    <span class='rubyid_hash identifier id'>hash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:dn</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_entry identifier id'>entry</span><span class='dot token'>.</span><span class='rubyid_dn identifier id'>dn</span><span class='rbrace token'>}</span>
    <span class='rubyid_@user_group_attrs_to_get ivar id'>@user_group_attrs_to_get</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_attr identifier id'>attr</span><span class='bitor op'>|</span>
      <span class='rubyid_hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='rubyid_k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='rubyid_attr identifier id'>attr</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_hash identifier id'>hash</span><span class='lbrack token'>[</span><span class='symbol val'>:members</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_user_membership_to_group_field</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_get_members identifier id'>get_members</span>
    <span class='comment val'># to do, if the members are dns, convert to usernames</span>
    <span class='rubyid_results identifier id'>results</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_hash identifier id'>hash</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_results identifier id'>results</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="find_user-instance_method">
  
    - (<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&gt;</tt>) <strong>find_user</strong>(user, exact = false, additional_filter = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns The @user_attrs_to_get for all usernames matching the query</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>user</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the username to search for</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>exact</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>if true, force an exact match, otherwise use wildcards if @use_wildcards is
true</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>additional_filter</span>
      
      
        <span class='type'>(<tt>Net::LDAP::Fliter</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>an additional filter to be AND’d to the existing filter.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Array.html" title="Array (class)">Array</a></span>&lt;<span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The @user_attrs_to_get for all usernames matching the query</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="InvalidConnectionError.html" title="JSS::InvalidConnectionError (class)">JSS::InvalidConnectionError</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/jss/api_object/ldap_server.rb', line 334</span>

<span class='rubyid_def def kw'>def</span> <span class='rubyid_find_user identifier id'>find_user</span><span class='lparen token'>(</span><span class='rubyid_user identifier id'>user</span><span class='comma token'>,</span> <span class='rubyid_exact identifier id'>exact</span> <span class='assign token'>=</span> <span class='rubyid_false false kw'>false</span><span class='comma token'>,</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span> <span class='assign token'>=</span> <span class='rubyid_nil nil kw'>nil</span><span class='rparen token'>)</span>
  
  <span class='rubyid_raise identifier id'>raise</span> <span class='rubyid_JSS constant id'>JSS</span><span class='colon2 op'>::</span><span class='rubyid_InvalidConnectionError constant id'>InvalidConnectionError</span><span class='comma token'>,</span> <span class='dstring node'>&quot;Not connected to LDAP server '#{@name}'. Please use #connect first.&quot;</span> <span class='rubyid_unless unless_mod kw'>unless</span> <span class='rubyid_@connected ivar id'>@connected</span>
  
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@use_wildcards ivar id'>@use_wildcards</span> <span class='rubyid_and and kw'>and</span> <span class='rubyid_not not kw'>not</span> <span class='rubyid_exact identifier id'>exact</span>
    <span class='rubyid_user_filter identifier id'>user_filter</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_contains identifier id'>contains</span><span class='lparen token'>(</span><span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_username</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_user identifier id'>user</span><span class='rparen token'>)</span>
  <span class='rubyid_else else kw'>else</span>
    <span class='rubyid_user_filter identifier id'>user_filter</span> <span class='assign token'>=</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_username</span><span class='rbrack token'>]</span><span class='comma token'>,</span> <span class='rubyid_user identifier id'>user</span><span class='rparen token'>)</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='comment val'># limit the object classes</span>
  <span class='rubyid_ocs identifier id'>ocs</span> <span class='assign token'>=</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:object_classes</span><span class='rbrack token'>]</span><span class='dot token'>.</span><span class='rubyid_to_s identifier id'>to_s</span><span class='dot token'>.</span><span class='rubyid_chomp identifier id'>chomp</span><span class='dot token'>.</span><span class='rubyid_split identifier id'>split</span><span class='lparen token'>(</span><span class='regexp val'>/,\s*/</span><span class='rparen token'>)</span>
  <span class='rubyid_anyall identifier id'>anyall</span> <span class='assign token'>=</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_object_class_to_any_or_all</span><span class='rbrack token'>]</span>
  <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span>  <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_ocs identifier id'>ocs</span><span class='dot token'>.</span><span class='rubyid_shift identifier id'>shift</span><span class='rparen token'>)</span>
  <span class='rubyid_ocs identifier id'>ocs</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_oc identifier id'>oc</span><span class='bitor op'>|</span>
    <span class='rubyid_if if kw'>if</span> <span class='rubyid_anyall identifier id'>anyall</span> <span class='eq op'>==</span> <span class='string val'>&quot;any&quot;</span>
      <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitor op'>|</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_oc identifier id'>oc</span><span class='rparen token'>)</span>
    <span class='rubyid_else else kw'>else</span>
      <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_Net constant id'>Net</span><span class='colon2 op'>::</span><span class='rubyid_LDAP constant id'>LDAP</span><span class='colon2 op'>::</span><span class='rubyid_Filter constant id'>Filter</span><span class='dot token'>.</span><span class='rubyid_eq identifier id'>eq</span><span class='lparen token'>(</span><span class='string val'>&quot;objectclass&quot;</span><span class='comma token'>,</span> <span class='rubyid_oc identifier id'>oc</span><span class='rparen token'>)</span>
    <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='assign token'>=</span> <span class='rubyid_oc_filter identifier id'>oc_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_user_filter identifier id'>user_filter</span>
  <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='assign token'>=</span> <span class='rubyid_full_filter identifier id'>full_filter</span> <span class='bitand op'>&amp;</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_additional_filter identifier id'>additional_filter</span>
  <span class='rubyid_treebase identifier id'>treebase</span> <span class='assign token'>=</span> <span class='rubyid_@user_mappings ivar id'>@user_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:search_base</span><span class='rbrack token'>]</span>
  <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='assign token'>=</span> <span class='rubyid_@user_attrs_to_get ivar id'>@user_attrs_to_get</span><span class='dot token'>.</span><span class='rubyid_values identifier id'>values</span>

  <span class='comment val'># should we grab membership from the user?</span>
  <span class='rubyid_if if kw'>if</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:user_group_membership_stored_in</span><span class='rbrack token'>]</span> <span class='eq op'>==</span> <span class='string val'>&quot;user object&quot;</span> <span class='rubyid_and and kw'>and</span> \
    <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_membership_to_user_field</span><span class='rbrack token'>]</span>
    <span class='rubyid_get_groups identifier id'>get_groups</span> <span class='assign token'>=</span> <span class='rubyid_true true kw'>true</span>
    <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_membership_to_user_field</span><span class='rbrack token'>]</span>
  <span class='rubyid_end end kw'>end</span>

  <span class='rubyid_results identifier id'>results</span> <span class='assign token'>=</span> <span class='lbrack token'>[</span><span class='rbrack token'>]</span>

  <span class='rubyid_@connection ivar id'>@connection</span><span class='dot token'>.</span><span class='rubyid_search identifier id'>search</span><span class='lparen token'>(</span><span class='symbol val'>:base</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_treebase identifier id'>treebase</span><span class='comma token'>,</span> <span class='symbol val'>:filter</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_full_filter identifier id'>full_filter</span><span class='comma token'>,</span> <span class='symbol val'>:attributes</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_ldap_attribs identifier id'>ldap_attribs</span> <span class='rparen token'>)</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_entry identifier id'>entry</span><span class='bitor op'>|</span>
    <span class='rubyid_userhash identifier id'>userhash</span> <span class='assign token'>=</span> <span class='lbrace token'>{</span><span class='symbol val'>:dn</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_entry identifier id'>entry</span><span class='dot token'>.</span><span class='rubyid_dn identifier id'>dn</span><span class='rbrace token'>}</span>
    <span class='rubyid_@user_attrs_to_get ivar id'>@user_attrs_to_get</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_k identifier id'>k</span><span class='comma token'>,</span><span class='rubyid_attr identifier id'>attr</span><span class='bitor op'>|</span>
      <span class='rubyid_userhash identifier id'>userhash</span><span class='lbrack token'>[</span><span class='rubyid_k identifier id'>k</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='rubyid_attr identifier id'>attr</span><span class='rbrack token'>]</span><span class='lbrack token'>[</span><span class='integer val'>0</span><span class='rbrack token'>]</span>
    <span class='rubyid_end end kw'>end</span>
    <span class='rubyid_userhash identifier id'>userhash</span><span class='lbrack token'>[</span><span class='symbol val'>:groups</span><span class='rbrack token'>]</span> <span class='assign token'>=</span> <span class='rubyid_entry identifier id'>entry</span><span class='lbrack token'>[</span><span class='rubyid_@user_group_membership_mappings ivar id'>@user_group_membership_mappings</span><span class='lbrack token'>[</span><span class='symbol val'>:map_group_membership_to_user_field</span><span class='rbrack token'>]</span><span class='rbrack token'>]</span> <span class='rubyid_if if_mod kw'>if</span> <span class='rubyid_get_groups identifier id'>get_groups</span>
    <span class='comment val'># to do - if the groups are dns, convert to groupnames</span>
    <span class='rubyid_results identifier id'>results</span> <span class='lshft op'>&lt;&lt;</span> <span class='rubyid_userhash identifier id'>userhash</span>
  <span class='rubyid_end end kw'>end</span>
  <span class='rubyid_results identifier id'>results</span>
<span class='rubyid_end end kw'>end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri Oct 17 10:17:20 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-1.8.7).
</div>

  </body>
</html>